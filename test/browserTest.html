<!DOCTYPE html>

<html>
	<head>
		<meta charset="UTF-8">
		<title>ElasticSearch Head</title>
		<link rel="stylesheet" href="../lib/es.css">
		<link rel="stylesheet" href="../lib/jsacx-widgets.css">
		<script src="../lib/jquery.js"></script>
		<script src="../lib/jsacx.js"></script>
		<script src="../lib/lang/en_strings.js"></script>
		<script src="../lib/jsacx-data.js"></script>
		<script src="../lib/jsacx-widgets.js"></script>
		<script src="../lib/es-core.js"></script>
		<script src="../lib/es-widgets.js"></script>
		<script>
			args = location.search.substring(1).split("&").reduce(function(r, p) {
				r[decodeURIComponent(p.split("=")[0])] = decodeURIComponent(p.split("=")[1]); return r;
			}, {});
			$(function() {
				var cluster = new es.Cluster({ base_uri: args['base_uri']});
				var query = new es.Query({ cluster: cluster, onChange: function(q) {
					console.log("change", q.indices.join(","), q.types.join(","), q.getData());
				}});
				new es.MetaDataFactory({
					cluster: cluster,
					onReady: function(metadata) {
						console.log("ready", metadata);
						new es.ui.QueryFilter({ metadata: metadata, query: query }).appendTo("body");
					}
				})
			});
		</script>
	</head>
	<body></body>
</html>
